<!DOCTYPE html>
<html>
<head>
    <title>{% block title %}Exam{% endblock %}</title>
</head>
<body>
    <div id="timer"></div>
    
    {% block content %}
    {% endblock %}

    <script>
        function updateTimer() {
            var startTime = new Date("{{ exam_start_time }}");
            var endTime = new Date("{{ exam_end_time }}");
            var currentTime = new Date();

            var remainingTime = Math.max(0, endTime - currentTime);
            var hours = Math.floor(remainingTime / (1000 * 60 * 60));
            var minutes = Math.floor((remainingTime % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((remainingTime % (1000 * 60)) / 1000);

            document.getElementById('timer').innerHTML = 
                "Time Remaining: " + hours + "h " + minutes + "m " + seconds + "s";

            if (remainingTime <= 0) {
                clearInterval(timerInterval);
                document.getElementById('timer').innerHTML = "Time's Up!";
                // You can add code here to automatically submit the exam or take other actions
            }
        }

        var timerInterval = setInterval(updateTimer, 1000);
        updateTimer(); // Initial call to display timer immediately
    </script>
</body>
</html>